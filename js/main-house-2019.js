var freeze;
var MDSenateDistricts = {};
var app = {};
var senateLayer;
var latitude = 38.9;
var longitude = -77.28;
var latLng = new L.LatLng(latitude, longitude);
var sidebar = $('#sidebar');
var map = L.map('map', {scrollWheelZoom:false}).setView(latLng, 8);
var data=[{"indexmatch":"1A","score2019":22,"lifetimescore":41,"rownum":46,"fullname":"Wendell R. Beitzel","id":"MDL000247","district":"1A","districtpadded":"01A","sort1":1,"party":"R","email":"wendell.beitzel@house.state.md.us","twitter":"bietzelw"},{"indexmatch":"1B","score2019":0,"lifetimescore":8,"rownum":47,"fullname":"Jason C. Buckel","id":"MDL000637","district":"1B","districtpadded":"01B","sort1":1,"party":"R","email":"Jason.Buckel@house.state.md.us"},{"indexmatch":"1C","score2019":22,"lifetimescore":21,"rownum":48,"fullname":"Mike McKay","id":"MDL000628","district":"1C","districtpadded":"01C","sort1":1,"party":"R","email":"Mike.McKay@house.state.md.us","twitter":"lavaledryclean"},{"indexmatch":"2A","score2019":20,"lifetimescore":16,"rownum":71,"fullname":"Neil Parrott","id":"MDL000648","district":"2A","districtpadded":"02A","sort1":2,"party":"R","email":"neil.parrott@house.state.md.us","twitter":"neilparrott"},{"indexmatch":"2A","score2019":30,"lifetimescore":25,"rownum":70,"fullname":"William J. Wivell","id":"MDL000719","district":"2A","districtpadded":"02A","sort1":2,"party":"R","email":"william.wivell@house.state.md.us"},{"indexmatch":"2B","score2019":11,"lifetimescore":21,"rownum":72,"fullname":"Paul Corderman","id":"MDL000696","district":"2B","districtpadded":"02B","sort1":2,"party":"R","email":"paul.corderman@house.state.md.us"},{"indexmatch":"3A","score2019":100,"lifetimescore":100,"rownum":85,"fullname":"Karen Lewis Young","id":"MDL000675","district":"3A","districtpadded":"03A","sort1":3,"party":"D","email":"Karen.Young@house.state.md.us","twitter":"KarenLewisYoung"},{"indexmatch":"3A","score2019":100,"lifetimescore":100,"rownum":86,"fullname":"Carol L. Krimm","id":"MDL000672","district":"3A","districtpadded":"03A","sort1":3,"party":"D","email":"Carol.Krimm@house.state.md.us"},{"indexmatch":"3B","score2019":100,"lifetimescore":100,"rownum":87,"fullname":"Ken Kerr","id":"MDL000699","district":"3B","districtpadded":"03B","sort1":3,"party":"D","email":"ken.kerr@house.state.md.us","twitter":"KenKerr3B"},{"indexmatch":4,"score2019":22,"lifetimescore":22,"rownum":1,"fullname":"Daniel L. Cox","id":"MDL000676","district":4,"districtpadded":"004","sort1":4,"party":"R","email":"dan.cox@house.state.md.us","twitter":"DelegateCox"},{"indexmatch":4,"score2019":20,"lifetimescore":23,"rownum":2,"fullname":"Barrie S. Ciliberti","id":"MDL000716","district":4,"districtpadded":"004","sort1":4,"party":"R","email":"Barrie.Ciliberti@house.state.md.us"},{"indexmatch":4,"score2019":22,"lifetimescore":22,"rownum":3,"fullname":"Jesse T. Pippy","id":"MDL000687","district":4,"districtpadded":"004","sort1":4,"party":"R","email":"jesse.pippy@house.state.md.us","twitter":"j_pippy"},{"indexmatch":5,"score2019":11,"lifetimescore":32,"rownum":5,"fullname":"Susan W. Krebs","id":"MDL000653","district":5,"districtpadded":"005","sort1":5,"party":"R","email":"susan.krebs@house.state.md.us"},{"indexmatch":5,"score2019":10,"lifetimescore":14,"rownum":4,"fullname":"April Rose","id":"MDL000718","district":5,"districtpadded":"005","sort1":5,"party":"R","email":"April.Rose@house.state.md.us"},{"indexmatch":5,"score2019":10,"lifetimescore":18,"rownum":6,"fullname":"Haven Shoemaker","id":"MDL000655","district":5,"districtpadded":"005","sort1":5,"party":"R","email":"Haven.Shoemaker@house.state.md.us","twitter":"Commshoemaker"},{"indexmatch":6,"score2019":22,"lifetimescore":21,"rownum":9,"fullname":"Robin L. Grammer, Jr.","id":"MDL000681","district":6,"districtpadded":"006","sort1":6,"party":"R","email":"Robin.Grammer@house.state.md.us","twitter":"RobinGrammer"},{"indexmatch":6,"score2019":20,"lifetimescore":18,"rownum":7,"fullname":"Robert B. Long","id":"MDL000658","district":6,"districtpadded":"006","sort1":6,"party":"R","email":"Bob.Long@house.state.md.us","twitter":"DelegateLong"},{"indexmatch":6,"score2019":22,"lifetimescore":15,"rownum":8,"fullname":"Ric Metzgar","id":"MDL000685","district":6,"districtpadded":"006","sort1":6,"party":"R","email":"Ric.Metzgar@house.state.md.us"},{"indexmatch":7,"score2019":0,"lifetimescore":16,"rownum":12,"fullname":"Richard K. Impallaria","id":"MDL000298","district":7,"districtpadded":"007","sort1":7,"party":"R","email":"rick.impallaria@house.state.md.us"},{"indexmatch":7,"score2019":22,"lifetimescore":22,"rownum":10,"fullname":"Lauren Arikan","id":"MDL000325","district":7,"districtpadded":"007","sort1":7,"party":"R","email":"lauren.arikan@house.state.md.us"},{"indexmatch":7,"score2019":22,"lifetimescore":24,"rownum":11,"fullname":"Kathy Szeliga","id":"MDL000412","district":7,"districtpadded":"007","sort1":7,"party":"R","email":"kathy.szeliga@house.state.md.us","twitter":"MarylandKathy"},{"indexmatch":8,"score2019":100,"lifetimescore":81,"rownum":13,"fullname":"Eric M. Bromwell","id":"MDL000255","district":8,"districtpadded":"008","sort1":8,"party":"D","email":"eric.bromwell@house.state.md.us","twitter":"EricBromwell"},{"indexmatch":8,"score2019":0,"lifetimescore":15,"rownum":15,"fullname":"Joseph C. Boteler III","id":"MDL000392","district":8,"districtpadded":"008","sort1":8,"party":"R","email":"joseph.boteler@house.state.md.us","twitter":"DelegateBoteler"},{"indexmatch":8,"score2019":100,"lifetimescore":100,"rownum":14,"fullname":"Harry Bhandari","id":"MDL000673","district":8,"districtpadded":"008","sort1":8,"party":"R","email":"harry.bhandari@house.state.md.us","twitter":"harry4maryland"},{"indexmatch":"9A","score2019":0,"lifetimescore":8,"rownum":103,"fullname":"Trent Kittleman","id":"MDL000671","district":"9A","districtpadded":"09A","sort1":9,"party":"R","email":"Trent.Kittleman@house.state.md.us","twitter":"TrentKittleman"},{"indexmatch":"9A","score2019":0,"lifetimescore":7,"rownum":104,"fullname":"Warren E. Miller","id":"MDL000328","district":"9A","districtpadded":"09A","sort1":9,"party":"R","email":"warren.miller@house.state.md.us","twitter":"delwarmill"},{"indexmatch":"9B","score2019":100,"lifetimescore":100,"rownum":105,"fullname":"Courtney Watson","id":"MDL000631","district":"9B","districtpadded":"09B","sort1":9,"party":"R","email":"courtney.watson@house.state.md.us","twitter":"courtneywatson1"},{"indexmatch":10,"score2019":100,"lifetimescore":97,"rownum":16,"fullname":"Benjamin Brooks","id":"MDL000625","district":10,"districtpadded":"010","sort1":10,"party":"D","email":"Benjamin.Brooks@house.state.md.us","twitter":"BenBrooksSr"},{"indexmatch":10,"score2019":89,"lifetimescore":91,"rownum":17,"fullname":"Jay Jalisi","id":"MDL000638","district":10,"districtpadded":"010","sort1":10,"party":"D","email":"Jay.Jalisi@house.state.md.us","twitter":"FriendsofJalisi"},{"indexmatch":10,"score2019":100,"lifetimescore":95,"rownum":18,"fullname":"Adrienne A. Jones","id":"MDL000304","district":10,"districtpadded":"010","sort1":10,"party":"D","email":"drienne.jones@house.state.md.us"},{"indexmatch":11,"score2019":100,"lifetimescore":100,"rownum":21,"fullname":"Shelly Hettleman","id":"MDL000667","district":11,"districtpadded":"011","sort1":11,"party":"D","email":"Shelly.Hettleman@house.state.md.us","twitter":"shellyhettleman"},{"indexmatch":11,"score2019":100,"lifetimescore":97,"rownum":19,"fullname":"Jon S. Cardin","id":"MDL000332","district":11,"districtpadded":"011","sort1":11,"party":"D","email":"jon.cardin@house.state.md.us","twitter":"JonCardin"},{"indexmatch":11,"score2019":100,"lifetimescore":93,"rownum":20,"fullname":"Dana Stein","id":"MDL000361","district":11,"districtpadded":"011","sort1":11,"party":"D","email":"dana.stein@house.state.md.us"},{"indexmatch":12,"score2019":100,"lifetimescore":100,"rownum":23,"fullname":"Eric Ebersole","id":"MDL000691","district":12,"districtpadded":"012","sort1":12,"party":"D","email":"Eric.Ebersole@house.state.md.us","twitter":"ericebersole"},{"indexmatch":12,"score2019":100,"lifetimescore":100,"rownum":24,"fullname":"Terri L. Hill","id":"MDL000647","district":12,"districtpadded":"012","sort1":12,"party":"D","email":"Terri.Hill@house.state.md.us","twitter":"FriendsofTerri"},{"indexmatch":12,"score2019":100,"lifetimescore":100,"rownum":22,"fullname":"Jessica Feldmark","id":"MDL000643","district":12,"districtpadded":"012","sort1":12,"party":"D","email":"jessica.feldmark@house.state.md.us","twitter":"JessicaFeldmark"},{"indexmatch":13,"score2019":100,"lifetimescore":100,"rownum":26,"fullname":"Vanessa E. Atterbeary","id":"MDL000620","district":13,"districtpadded":"013","sort1":13,"party":"D","email":"Vanessa.Atterbeary@house.state.md.us","twitter":"VAtterbeary"},{"indexmatch":13,"score2019":100,"lifetimescore":95,"rownum":27,"fullname":"Shane E. Pendergrass","id":"MDL000342","district":13,"districtpadded":"013","sort1":13,"party":"D","email":"shane.pendergrass@house.state.md.us"},{"indexmatch":13,"score2019":100,"lifetimescore":100,"rownum":25,"fullname":"Jen Terrasa","id":"MDL000368","district":13,"districtpadded":"013","sort1":13,"party":"D","email":"jen.terrasa@house.state.md.us","twitter":"JenTerrasa"},{"indexmatch":14,"score2019":100,"lifetimescore":94,"rownum":29,"fullname":"Anne R. Kaiser","id":"MDL000306","district":14,"districtpadded":"014","sort1":14,"party":"D","email":"nne.kaiser@house.state.md.us","twitter":"DelegateKaiser"},{"indexmatch":14,"score2019":100,"lifetimescore":96,"rownum":28,"fullname":"Eric G. Luedtke","id":"MDL000401","district":14,"districtpadded":"014","sort1":14,"party":"D","email":"eric.luedtke@house.state.md.us","twitter":"EricLuedtke"},{"indexmatch":14,"score2019":90,"lifetimescore":96,"rownum":30,"fullname":"Pam Queen","id":"MDL000417","district":14,"districtpadded":"014","sort1":14,"party":"D","email":"craig.zucker@house.state.md.us"},{"indexmatch":15,"score2019":100,"lifetimescore":93,"rownum":32,"fullname":"Kathleen M. Dumais","id":"MDL000270","district":15,"districtpadded":"015","sort1":15,"party":"D","email":"kathleen.dumais@house.state.md.us","twitter":"KathleenDumais1"},{"indexmatch":15,"score2019":100,"lifetimescore":100,"rownum":33,"fullname":"David Fraser-Hidalgo","id":"MDL000617","district":15,"districtpadded":"015","sort1":15,"party":"D","email":"david.fraser.hidalgo@house.state.md.us","twitter":"fraserfor15"},{"indexmatch":15,"score2019":100,"lifetimescore":100,"rownum":31,"fullname":"Lily Qi","id":"MDL000404","district":15,"districtpadded":"015","sort1":15,"party":"D","email":"lily.qi@house.state.md.us","twitter":"LilyQiMaryland"},{"indexmatch":16,"score2019":100,"lifetimescore":100,"rownum":36,"fullname":"Sara Love","id":"MDL000277","district":16,"districtpadded":"016","sort1":16,"party":"D","email":"sara.love@house.state.md.us","twitter":"SaraLove4MD"},{"indexmatch":16,"score2019":100,"lifetimescore":100,"rownum":34,"fullname":"Ariana B. Kelly","id":"MDL000400","district":16,"districtpadded":"016","sort1":16,"party":"D","email":"riana.kelly@house.state.md.us","twitter":"DelArianaKelly"},{"indexmatch":16,"score2019":100,"lifetimescore":100,"rownum":35,"fullname":"Marc Korman","id":"MDL000657","district":16,"districtpadded":"016","sort1":16,"party":"D","email":"Marc.Korman@house.state.md.us","twitter":"mkorman"},{"indexmatch":17,"score2019":100,"lifetimescore":92,"rownum":39,"fullname":"Kumar P. Barve","id":"MDL000244","district":17,"districtpadded":"017","sort1":17,"party":"D","email":"kumar.barve@house.state.md.us","twitter":"KumarBarve"},{"indexmatch":17,"score2019":100,"lifetimescore":94,"rownum":37,"fullname":"Jim Gilchrist","id":"MDL000281","district":17,"districtpadded":"017","sort1":17,"party":"D","email":"jim.gilchrist@house.state.md.us"},{"indexmatch":17,"score2019":100,"lifetimescore":100,"rownum":38,"fullname":"Julie Palakovich Carr","id":"MDL000644","district":17,"districtpadded":"017","sort1":17,"party":"D","email":"julie.palakovichcarr@house.state.md.us","twitter":"palakovichcarr"},{"indexmatch":18,"score2019":100,"lifetimescore":96,"rownum":40,"fullname":"Alfred C. Carr, Jr.","id":"MDL000260","district":18,"districtpadded":"018","sort1":18,"party":"D","email":"fred.carr@house.state.md.us","twitter":"alfredcarr"},{"indexmatch":18,"score2019":100,"lifetimescore":100,"rownum":41,"fullname":"Emily Shetty","id":"MDL000284","district":18,"districtpadded":"018","sort1":18,"party":"D","email":"emily.shetty@house.state.md.us","twitter":"EmilyShetty"},{"indexmatch":18,"score2019":100,"lifetimescore":100,"rownum":42,"fullname":"Jared Solomon","id":"MDL000373","district":18,"districtpadded":"018","sort1":18,"party":"D","email":"jared.solomon@house.state.md.us","twitter":"jaredssolomon"},{"indexmatch":19,"score2019":100,"lifetimescore":100,"rownum":43,"fullname":"Bonnie Cullison","id":"MDL000393","district":19,"districtpadded":"019","sort1":19,"party":"D","email":"bonnie.cullison@house.state.md.us","twitter":"Del_Cullison"},{"indexmatch":19,"score2019":100,"lifetimescore":100,"rownum":44,"fullname":"Charlotte Crutchfield","id":"MDL000311","district":19,"districtpadded":"019","sort1":19,"party":"D","email":"charlotte.crutchfield@house.state.md.us","twitter":"CharCrutchfield"},{"indexmatch":19,"score2019":100,"lifetimescore":100,"rownum":45,"fullname":"Vaughn Stewart","id":"MDL000635","district":19,"districtpadded":"019","sort1":19,"party":"D","email":"vaughn.stewart@house.state.md.us","twitter":"DelegateStewart"},{"indexmatch":20,"score2019":100,"lifetimescore":100,"rownum":51,"fullname":"Lorig Charkoudian","id":"MDL000293","district":20,"districtpadded":"020","sort1":20,"party":"D","email":"lorig.charkoudian@house.state.md.us","twitter":"LCharkoudian"},{"indexmatch":20,"score2019":100,"lifetimescore":100,"rownum":50,"fullname":"David Moon","id":"MDL000645","district":20,"districtpadded":"020","sort1":20,"party":"D","email":"David.Moon@house.state.md.us","twitter":"DavidMoon2014"},{"indexmatch":20,"score2019":100,"lifetimescore":100,"rownum":49,"fullname":"Jheanelle K. Wilkins","id":"MDL000623","district":20,"districtpadded":"020","sort1":20,"party":"D","email":"jheanelle.wilkins@house.state.md.us","twitter":"Willcsmithjr"},{"indexmatch":21,"score2019":100,"lifetimescore":95,"rownum":54,"fullname":"Ben Barnes","id":"MDL000241","district":21,"districtpadded":"021","sort1":21,"party":"D","email":"ben.barnes@house.state.md.us"},{"indexmatch":21,"score2019":100,"lifetimescore":100,"rownum":53,"fullname":"Mary A. Lehman","id":"MDL000278","district":21,"districtpadded":"021","sort1":21,"party":"D","email":"mary.lehman@house.state.md.us","twitter":"MaryLehman_D1"},{"indexmatch":21,"score2019":100,"lifetimescore":96,"rownum":52,"fullname":"Joseline A. Pena-Melnyk","id":"MDL000341","district":21,"districtpadded":"021","sort1":21,"party":"D","email":"joseline.pena.melnyk@house.state.md.us","twitter":"penamelnykformd"},{"indexmatch":22,"score2019":100,"lifetimescore":96,"rownum":57,"fullname":"Tawanna P. Gaines","id":"MDL000279","district":22,"districtpadded":"022","sort1":22,"party":"D","email":"wanna.gaines@house.state.md.us"},{"indexmatch":22,"score2019":100,"lifetimescore":95,"rownum":56,"fullname":"Anne Healey","id":"MDL000290","district":22,"districtpadded":"022","sort1":22,"party":"D","email":"nne.healey@house.state.md.us"},{"indexmatch":22,"score2019":100,"lifetimescore":97,"rownum":55,"fullname":"Alonzo T. Washington","id":"MDL000605","district":22,"districtpadded":"022","sort1":22,"party":"D","email":"nzo.washington@house.state.md.us","twitter":"DelegateATW"},{"indexmatch":"23A","score2019":100,"lifetimescore":98,"rownum":106,"fullname":"Geraldine Valentino-Smith","id":"MDL000413","district":"23A","districtpadded":"23A","sort1":23,"party":"D","email":"geraldine.valentino.smith@house.state.md.us"},{"indexmatch":"23B","score2019":100,"lifetimescore":91,"rownum":107,"fullname":"Marvin E. Holmes, Jr.","id":"MDL000294","district":"23B","districtpadded":"23B","sort1":23,"party":"D","email":"rvin.holmes@house.state.md.us","twitter":"MarvinEHolmesJr"},{"indexmatch":"23B","score2019":100,"lifetimescore":100,"rownum":108,"fullname":"Ron Watson","id":"MDL000659","district":"23B","districtpadded":"23B","sort1":23,"party":"D","email":"ron.watson@house.state.md.us","twitter":"RonForMaryland"},{"indexmatch":24,"score2019":100,"lifetimescore":100,"rownum":58,"fullname":"Andrea Fletcher Harrison","id":"MDL000295","district":24,"districtpadded":"024","sort1":24,"party":"D","email":"andreafletcher.harrison@house.state.md.us","twitter":"acharrisond24"},{"indexmatch":24,"score2019":89,"lifetimescore":95,"rownum":59,"fullname":"Jazz Lewis","id":"MDL000372","district":24,"districtpadded":"024","sort1":24,"party":"D","email":"jazz.lewis@house.state.md.us"},{"indexmatch":24,"score2019":100,"lifetimescore":96,"rownum":60,"fullname":"Erek L. Barron","id":"MDL000668","district":24,"districtpadded":"024","sort1":24,"party":"D","email":"Erek.Barron@house.state.md.us","twitter":"erekbarron"},{"indexmatch":25,"score2019":100,"lifetimescore":100,"rownum":62,"fullname":"Nick Charles","id":"MDL000663","district":25,"districtpadded":"025","sort1":25,"party":"D","email":"nick.charles@house.state.md.us","twitter":"NickCharlesII"},{"indexmatch":25,"score2019":100,"lifetimescore":97,"rownum":63,"fullname":"Darryl Barnes","id":"MDL000664","district":25,"districtpadded":"025","sort1":25,"party":"D","email":"Darryl.Barnes@house.state.md.us"},{"indexmatch":25,"score2019":100,"lifetimescore":95,"rownum":61,"fullname":"Dereck E. Davis","id":"MDL000267","district":25,"districtpadded":"025","sort1":25,"party":"D","email":"dereck.davis@house.state.md.us"},{"indexmatch":26,"score2019":100,"lifetimescore":93,"rownum":66,"fullname":"Veronica Turner","id":"MDL000619","district":26,"districtpadded":"026","sort1":26,"party":"D","email":"veronica.turner@house.state.md.us","twitter":"VeronicaLTurner"},{"indexmatch":26,"score2019":100,"lifetimescore":92,"rownum":65,"fullname":"Kriselda Valderrama","id":"MDL000370","district":26,"districtpadded":"026","sort1":26,"party":"D","email":"kris.valderrama@house.state.md.us"},{"indexmatch":26,"score2019":89,"lifetimescore":88,"rownum":64,"fullname":"Jay Walker","id":"MDL000374","district":26,"districtpadded":"026","sort1":26,"party":"D","email":"jay.walker@house.state.md.us"},{"indexmatch":"27A","score2019":100,"lifetimescore":100,"rownum":109,"fullname":"Susie Proctor","id":"MDL000343","district":"27A","districtpadded":"27A","sort1":27,"party":"D","email":"susie.proctor@house.state.md.us"},{"indexmatch":"27B","score2019":100,"lifetimescore":96,"rownum":110,"fullname":"Michael A. Jackson","id":"MDL000621","district":"27B","districtpadded":"27B","sort1":27,"party":"D","email":"Michael.Jackson@house.state.md.us","twitter":"Michaelfor27B"},{"indexmatch":"27C","score2019":20,"lifetimescore":10,"rownum":111,"fullname":"Mark N. Fisher","id":"MDL000654","district":"27C","districtpadded":"27C","sort1":27,"party":"R","email":"rk.fisher@house.state.md.us","twitter":"fisher4maryland"},{"indexmatch":28,"score2019":100,"lifetimescore":100,"rownum":68,"fullname":"Debra Davis","id":"MDL000301","district":28,"districtpadded":"028","sort1":28,"party":"D","email":"debra.davis@house.state.md.us","twitter":"DDavisCharlesCo"},{"indexmatch":28,"score2019":90,"lifetimescore":96,"rownum":69,"fullname":"Edith J. Patterson","id":"MDL000689","district":28,"districtpadded":"028","sort1":28,"party":"D","email":"Edith.Patterson@house.state.md.us","twitter":"EdithPatterson"},{"indexmatch":28,"score2019":100,"lifetimescore":88,"rownum":67,"fullname":"C. T. Wilson","id":"MDL000416","district":28,"districtpadded":"028","sort1":28,"party":"D","email":"ct.wilson@house.state.md.us","twitter":"votectwilson"},{"indexmatch":"29A","score2019":11,"lifetimescore":11,"rownum":112,"fullname":"Matthew Morgan","id":"MDL000674","district":"29A","districtpadded":"29A","sort1":29,"party":"R","email":"Matt.Morgan@house.state.md.us","twitter":"MattMorgan29A"},{"indexmatch":"29B","score2019":100,"lifetimescore":100,"rownum":113,"fullname":"Brian M. Crosby","id":"MDL000693","district":"29B","districtpadded":"29B","sort1":29,"party":"R","email":"brian.crosby@house.state.md.us","twitter":"BC4MD"},{"indexmatch":"29C","score2019":50,"lifetimescore":42,"rownum":114,"fullname":"Jerry Clark","id":"MDL000339","district":"29C","districtpadded":"29C","sort1":29,"party":"R","email":"jerry.clark@house.state.md.us"},{"indexmatch":"30A","score2019":100,"lifetimescore":100,"rownum":115,"fullname":"Alice Cain","id":"MDL000642","district":"30A","districtpadded":"30A","sort1":30,"party":"R","email":"alice.cain@house.state.md.us","twitter":"AliceJCain"},{"indexmatch":"30A","score2019":100,"lifetimescore":95,"rownum":116,"fullname":"Michael E. Busch","id":"MDL000636","district":"30A","districtpadded":"30A","sort1":30,"party":"D","email":"chael.busch@house.state.md.us","twitter":"SpeakerBusch"},{"indexmatch":"30B","score2019":33,"lifetimescore":32,"rownum":117,"fullname":"Seth A. Howard","id":"MDL000630","district":"30B","districtpadded":"30B","sort1":30,"party":"R","email":"Seth.Howard@house.state.md.us","twitter":"sethfordelegate"},{"indexmatch":"31A","score2019":100,"lifetimescore":88,"rownum":118,"fullname":"Ned Carey","id":"MDL000665","district":"31A","districtpadded":"31A","sort1":31,"party":"D","email":"Ned.Carey@house.state.md.us"},{"indexmatch":"31B","score2019":22,"lifetimescore":22,"rownum":119,"fullname":"Brian Chisholm","id":"MDL000690","district":"31B","districtpadded":"31B","sort1":31,"party":"R","email":"brian.chisholm@house.state.md.us","twitter":"chisholmformd"},{"indexmatch":"31B","score2019":29,"lifetimescore":49,"rownum":120,"fullname":"Nicholaus R. Kipke","id":"MDL000626","district":"31B","districtpadded":"31B","sort1":31,"party":"R","email":"nicholaus.kipke@house.state.md.us","twitter":"Kipke"},{"indexmatch":32,"score2019":100,"lifetimescore":100,"rownum":73,"fullname":"Sandy J. Bartlett","id":"MDL000246","district":32,"districtpadded":"032","sort1":32,"party":"D","email":"sandy.bartlett@house.state.md.us","twitter":"DelBartlett32"},{"indexmatch":32,"score2019":100,"lifetimescore":100,"rownum":74,"fullname":"Mark S. Chang","id":"MDL000634","district":32,"districtpadded":"032","sort1":32,"party":"D","email":"Mark.Chang@house.state.md.us","twitter":"marksoochang"},{"indexmatch":32,"score2019":100,"lifetimescore":100,"rownum":75,"fullname":"Mike Rogers","id":"MDL000359","district":32,"districtpadded":"032","sort1":32,"party":"D","email":"mike.rogers@house.state.md.us","twitter":"MikeJRogers4"},{"indexmatch":33,"score2019":44,"lifetimescore":33,"rownum":77,"fullname":"Michael E. Malone","id":"MDL000720","district":33,"districtpadded":"033","sort1":33,"party":"R","email":"Michael.Malone@house.state.md.us"},{"indexmatch":33,"score2019":100,"lifetimescore":100,"rownum":78,"fullname":"Heather Bagnall","id":"MDL000677","district":33,"districtpadded":"033","sort1":33,"party":"D","email":"heather.bagnall@house.state.md.us","twitter":"DelegateBagnall"},{"indexmatch":33,"score2019":44,"lifetimescore":26,"rownum":76,"fullname":"Sid Saab","id":"MDL000700","district":33,"districtpadded":"033","sort1":33,"party":"R","email":"Sid.Saab@house.state.md.us","twitter":"SidSaab"},{"indexmatch":"34A","score2019":100,"lifetimescore":100,"rownum":121,"fullname":"Steve Johnson","id":"MDL000395","district":"34A","districtpadded":"34A","sort1":34,"party":"R","email":"steve.johnson@house.state.md.us","twitter":"johnson4rep"},{"indexmatch":"34A","score2019":100,"lifetimescore":97,"rownum":122,"fullname":"Mary Ann Lisanti","id":"MDL000703","district":"34A","districtpadded":"34A","sort1":34,"party":"D","email":"MaryAnn.Lisanti@house.state.md.us","twitter":"maryannlisanti"},{"indexmatch":"34B","score2019":22,"lifetimescore":28,"rownum":123,"fullname":"Susan K. McComas","id":"MDL000641","district":"34B","districtpadded":"34B","sort1":34,"party":"R","email":"susan.mccomas@house.state.md.us"},{"indexmatch":"35A","score2019":56,"lifetimescore":52,"rownum":124,"fullname":"Kevin B. Hornberger","id":"MDL000692","district":"35A","districtpadded":"35A","sort1":35,"party":"R","email":"Kevin.Hornberger@house.state.md.us"},{"indexmatch":"35B","score2019":60,"lifetimescore":61,"rownum":125,"fullname":"Andrew Cassilly","id":"MDL000622","district":"35B","districtpadded":"35B","sort1":35,"party":"R","email":"Andrew.Cassilly@house.state.md.us"},{"indexmatch":"35B","score2019":20,"lifetimescore":29,"rownum":126,"fullname":"Teresa E. Reilly","id":"MDL000650","district":"35B","districtpadded":"35B","sort1":35,"party":"R","email":"Teresa.Reilly@house.state.md.us"},{"indexmatch":36,"score2019":10,"lifetimescore":9,"rownum":79,"fullname":"Steven J. Arentz","id":"MDL000618","district":36,"districtpadded":"036","sort1":36,"party":"R","email":"steven.arentz@house.state.md.us","twitter":"Steve_Arentz"},{"indexmatch":36,"score2019":22,"lifetimescore":21,"rownum":80,"fullname":"Jefferson L. Ghrist","id":"MDL000686","district":36,"districtpadded":"036","sort1":36,"party":"R","email":"Jeff.Ghrist@house.state.md.us","twitter":"jeffghrist"},{"indexmatch":36,"score2019":20,"lifetimescore":24,"rownum":81,"fullname":"Jay A. Jacobs","id":"MDL000399","district":36,"districtpadded":"036","sort1":36,"party":"R","email":"jay.jacobs@house.state.md.us"},{"indexmatch":"37A","score2019":56,"lifetimescore":69,"rownum":127,"fullname":"Sheree Sample-Hughes","id":"MDL000683","district":"37A","districtpadded":"37A","sort1":37,"party":"D","email":"Sheree.Sample.Hughes@house.state.md.us"},{"indexmatch":"37B","score2019":0,"lifetimescore":12,"rownum":129,"fullname":"Christopher T. Adams","id":"MDL000697","district":"37B","districtpadded":"37B","sort1":37,"party":"R","email":"Christopher.Adams@house.state.md.us","twitter":"Adams4Maryland"},{"indexmatch":"37B","score2019":20,"lifetimescore":24,"rownum":128,"fullname":"Johnny Mautz","id":"MDL000660","district":"37B","districtpadded":"37B","sort1":37,"party":"R","email":"Johnny.Mautz@house.state.md.us","twitter":"Mautz4Delegate"},{"indexmatch":"38A","score2019":20,"lifetimescore":21,"rownum":130,"fullname":"Charles J. Otto","id":"MDL000406","district":"38A","districtpadded":"38A","sort1":38,"party":"R","email":"charles.otto@house.state.md.us"},{"indexmatch":"38B","score2019":33,"lifetimescore":51,"rownum":131,"fullname":"Carl  Anderton, Jr.","id":"MDL000684","district":"38B","districtpadded":"38B","sort1":38,"party":"R","email":"Carl.Anderton@house.state.md.us","twitter":"carlandertonjr"},{"indexmatch":"38C","score2019":11,"lifetimescore":11,"rownum":132,"fullname":"Wayne A. Hartman","id":"MDL000695","district":"38C","districtpadded":"38C","sort1":38,"party":"R","email":"wayne.hartman@house.state.md.us","twitter":"Hartman4MD"},{"indexmatch":39,"score2019":89,"lifetimescore":89,"rownum":82,"fullname":"Gabriel Acevero","id":"MDL000240","district":39,"districtpadded":"039","sort1":39,"party":"D","email":"gabriel.acevero@house.state.md.us","twitter":"gacevero"},{"indexmatch":39,"score2019":100,"lifetimescore":97,"rownum":84,"fullname":"Kirill Reznik","id":"MDL000345","district":39,"districtpadded":"039","sort1":39,"party":"D","email":"kirill.reznik@house.state.md.us","twitter":"DelegateReznik"},{"indexmatch":39,"score2019":89,"lifetimescore":89,"rownum":83,"fullname":"Lesley J. Lopez","id":"MDL000409","district":39,"districtpadded":"039","sort1":39,"party":"D","email":"lesley.lopez@house.state.md.us","twitter":"LesleyJLopez"},{"indexmatch":40,"score2019":100,"lifetimescore":87,"rownum":89,"fullname":"Frank M. Conaway, Jr.","id":"MDL000264","district":40,"districtpadded":"040","sort1":40,"party":"D","email":"frank.conaway@house.state.md.us"},{"indexmatch":40,"score2019":100,"lifetimescore":100,"rownum":90,"fullname":"Melissa Wells","id":"MDL000632","district":40,"districtpadded":"040","sort1":40,"party":"D","email":"melissa.wells@house.state.md.us","twitter":"ElectWells"},{"indexmatch":40,"score2019":100,"lifetimescore":100,"rownum":88,"fullname":"Nick Mosby","id":"MDL000348","district":40,"districtpadded":"040","sort1":40,"party":"D","email":"nick.mosby@house.state.md.us"},{"indexmatch":41,"score2019":100,"lifetimescore":100,"rownum":91,"fullname":"Tony Bridges","id":"MDL000261","district":41,"districtpadded":"041","sort1":41,"party":"D","email":"tony.bridges@house.state.md.us","twitter":"TonyBridges41"},{"indexmatch":41,"score2019":100,"lifetimescore":100,"rownum":92,"fullname":"Dalya Attar","id":"MDL000338","district":41,"districtpadded":"041","sort1":41,"party":"D","email":"dalya.attar@house.state.md.us","twitter":"dalyaattar41"},{"indexmatch":41,"score2019":100,"lifetimescore":93,"rownum":93,"fullname":"Samuel I. Rosenberg","id":"MDL000349","district":41,"districtpadded":"041","sort1":41,"party":"D","email":"samuel.rosenberg@house.state.md.us","twitter":"delsandy"},{"indexmatch":"42A","score2019":100,"lifetimescore":96,"rownum":133,"fullname":"Stephen W. Lafferty","id":"MDL000679","district":"42A","districtpadded":"42A","sort1":42,"party":"D","email":"stephen.lafferty@house.state.md.us","twitter":"delsteve42"},{"indexmatch":"42B","score2019":100,"lifetimescore":100,"rownum":134,"fullname":"Michele Guyton","id":"MDL000656","district":"42B","districtpadded":"42B","sort1":42,"party":"D","email":"michele.guyton@house.state.md.us","twitter":"guyton42b"},{"indexmatch":"42B","score2019":11,"lifetimescore":11,"rownum":135,"fullname":"Nino Mangione","id":"MDL000666","district":"42B","districtpadded":"42B","sort1":42,"party":"R","email":"curt.anderson@house.state.md.us","twitter":"CurtAnderson43"},{"indexmatch":43,"score2019":86,"lifetimescore":92,"rownum":95,"fullname":"Curt Anderson","id":"MDL000238","district":43,"districtpadded":"043","sort1":43,"party":"D","email":"curt.anderson@house.state.md.us","twitter":"DelegateHaynes"},{"indexmatch":43,"score2019":100,"lifetimescore":90,"rownum":96,"fullname":"Maggie McIntosh","id":"MDL000327","district":43,"districtpadded":"043","sort1":43,"party":"D","email":"ggie.mcintosh@house.state.md.us","twitter":"DelMaggie43"},{"indexmatch":43,"score2019":100,"lifetimescore":100,"rownum":94,"fullname":"Regina T. Boyce","id":"MDL000415","district":43,"districtpadded":"043","sort1":43,"party":"D","email":"regina.boyce@house.state.md.us","twitter":"reginatboyce"},{"indexmatch":"44A","score2019":100,"lifetimescore":95,"rownum":136,"fullname":"Keith E. Haynes","id":"MDL000669","district":"44A","districtpadded":"44A","sort1":44,"party":"D","email":"keith.haynes@house.state.md.us","twitter":"DelegateHaynes"},{"indexmatch":"44B","score2019":100,"lifetimescore":100,"rownum":137,"fullname":"Charles E. Sydnor, III","id":"MDL000652","district":"44B","districtpadded":"44B","sort1":44,"party":"D","email":"Charles.Sydnor@house.state.md.us","twitter":"CharlesSydnor3d"},{"indexmatch":"44B","score2019":100,"lifetimescore":100,"rownum":138,"fullname":"Pat Young","id":"MDL000670","district":"44B","districtpadded":"44B","sort1":44,"party":"D","email":"pat.young@house.state.md.us"},{"indexmatch":45,"score2019":100,"lifetimescore":91,"rownum":99,"fullname":"Talmadge Branch","id":"MDL000252","district":45,"districtpadded":"045","sort1":45,"party":"D","email":"dge.branch@house.state.md.us","twitter":"WhipTBranch"},{"indexmatch":45,"score2019":100,"lifetimescore":88,"rownum":97,"fullname":"Cheryl D. Glenn","id":"MDL000282","district":45,"districtpadded":"045","sort1":45,"party":"D","email":"cheryl.glenn@house.state.md.us"},{"indexmatch":45,"score2019":100,"lifetimescore":100,"rownum":98,"fullname":"Stephanie Smith","id":"MDL000640","district":45,"districtpadded":"045","sort1":45,"party":"D","email":"stephanie.smith@house.state.md.us","twitter":"Smith4Delegate"},{"indexmatch":46,"score2019":100,"lifetimescore":98,"rownum":100,"fullname":"Luke Clippinger","id":"MDL000391","district":46,"districtpadded":"046","sort1":46,"party":"D","email":"uke.clippinger@house.state.md.us","twitter":"lukeclippinger"},{"indexmatch":46,"score2019":100,"lifetimescore":100,"rownum":101,"fullname":"Robbyn T. Lewis","id":"MDL000287","district":46,"districtpadded":"046","sort1":46,"party":"D","email":"robbyn.lewis@house.state.md.us"},{"indexmatch":46,"score2019":100,"lifetimescore":100,"rownum":102,"fullname":"Brooke E. Lierman","id":"MDL000688","district":46,"districtpadded":"046","sort1":46,"party":"D","email":"Brooke.Lierman@house.state.md.us","twitter":"BELBaltimore"},{"indexmatch":"47A","score2019":100,"lifetimescore":100,"rownum":140,"fullname":"Diana M. Fennell","id":"MDL000651","district":"47A","districtpadded":"47A","sort1":47,"party":"D","email":"Diana.Fennell@house.state.md.us","twitter":"DianaMFennell"},{"indexmatch":"47A","score2019":100,"lifetimescore":100,"rownum":139,"fullname":"Julian Ivey","id":"MDL000661","district":"47A","districtpadded":"47A","sort1":47,"party":"D","email":"julian.ivey@house.state.md.us","twitter":"JulianiveyPG"},{"indexmatch":"47B","score2019":100,"lifetimescore":100,"rownum":141,"fullname":"Wanika Fisher","id":"MDL000649","district":"47B","districtpadded":"47B","sort1":47,"party":"D","email":"wanika.fisher@house.state.md.us","twitter":"WanikaFisher"}]

$(document).ready(function() {
showInfo(data);
loadGeo();
});

function showInfo(data) {
    var scoreColor;
    var source = $("#senate-template").html();
    var template = Handlebars.compile(source);
    var sourcebox = $("#senate-template-infobox").html();
    app.infoboxTemplate = Handlebars.compile(sourcebox);

    for (i = 0; i < data.length; i++) {
        scoreColor = getColor(data[i].score2019);
        data[i]['scoreColor'] = scoreColor;
        MDSenateDistricts[data[i].rownum] = data[i];
        var html = template(data[i]);
        $("#content").append(html);
    }
}

function getColor(score) {
  return score > 99 ? '#4EAB07' :
    score > 74 ? '#82e0c3' :
      score > 49 ? '#FEF200' :
        score > 24 ? '#FDC300' :
          score > 0 ? '#FC8400' :
            'rgb(255,0,0)';
}

var geoStyle = function(data) {
  var rownum = Number(data.properties.rownum);
  // console.log("geoStyle: ", Number(data.properties.SLDUST));
  var score = MDSenateDistricts[rownum].score2019;
  var scoreToColor = getColor(score);

  return {
    radius: 5.5,
    fillColor: scoreToColor,
    weight: 2,
    opacity: 0.51,
    color: '#fff',
    dashArray: '0',
    fillOpacity: 1
  }
};


function loadGeo() {
  L.tileLayer('https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png', {
      minZoom: 8,
    maxZoom: 12,
      attribution: 'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
  }).addTo(map);

  senateBoundaryLayer = L.geoJson(mdSenateBoundary, {
  }).addTo(map).setStyle({
      stroke: true,
      fillColor:'#ffffff',
      color: '#3f3f3f',
      weight: 1,
      fillOpacity:.85
    });

  senateLayer = L.geoJson(geosenate, {
    onEachFeature: onEachFeature,
    pointToLayer: function(feature, latlng) {
      return L.circleMarker(latlng, geoStyle(feature));
    }
  }).addTo(map);
}


function onEachFeature(feature, layer) {
  layer.on({
    mouseover: highlightFeature,
    mouseout: resetHighlight,
    click: mapMemberDetailClick
  });
}


function highlightFeature(e) {
  var layer = e.target;
  var memberNumber = Number(layer.feature.properties.rownum);
  var memberDetail = MDSenateDistricts[memberNumber];


  if (!freeze) {
    html = app.infoboxTemplate(memberDetail);
    $('#sidebar').html(html);

    layer.setStyle({
      weight: 2,
      color: '#fff',
      dashArray: '',
      fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera) {
      layer.bringToFront();
    }
  }
}

function resetHighlight(e) {
  var layer = e.target;
  senateLayer.resetStyle(e.target);

  if (!freeze) {
    clearInfobox();
    layer.setStyle({
      fillOpacity: 1
    });
  }
}

function mapMemberDetailClick(e) {
  freeze = 1;
  var boundary = e.target;
  var memberNumber = Number(boundary.feature.properties.rownum);
  var member = memberDetailFunction(memberNumber);
}

function memberDetailFunction(memberNumber) {
  var districtDetail = MDSenateDistricts[memberNumber];
  var html = app.infoboxTemplate(districtDetail);
  $('#sidebar').html(html);
  // $('#sidebar').html(JSON.stringify(districtDetail));
}


$(document).on("click", "button", function(event) {
  event.preventDefault();
  clearInfobox();
  freeze = 0;
});

function clearInfobox() {
    sidebar.html(' ');
}
